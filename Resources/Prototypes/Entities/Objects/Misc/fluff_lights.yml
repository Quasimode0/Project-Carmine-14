  - type: entity
    parent: BaseItem
    id: BaseLamp
    name: lantern
    abstract: true
    components:
      - type: Sprite
        sprite: Objects/Misc/Lights/lights.rsi
      - type: Item
        sprite: Objects/Misc/Lights/lights.rsi
        size: Normal
        heldPrefix: false
      - type: Appearance
      - type: PointLight
        enabled: false
        radius: 3
        energy: 2
        netsync: false
      - type: Physics
        canCollide: false
      - type: ContainerContainer
        containers:
          cell_slot: !type:ContainerSlot
      - type: HandheldLight
        addPrefix: true
        blinkingBehaviourId: blinking
        radiatingBehaviourId: radiating
      - type: LightBehaviour
        behaviours:
          - !type:FadeBehaviour
            id: radiating
            maxDuration: 2.0
            startValue: 3.0
            endValue: 2.0
            isLooped: true
            reverseWhenFinished: true
          - !type:PulseBehaviour
            id: blinking
            interpolate: Nearest
            maxDuration: 1.0
            minValue: 0.1
            maxValue: 2.0
            isLooped: true
      - type: PowerCellSlot
        cellSlotId: cell_slot
      - type: ItemSlots
        slots:
          cell_slot:
            name: power-cell-slot-component-slot-name-default
            startingItem: PowerCellSmall
      - type: EtherealLight
      - type: ToggleableLightVisuals
      - type: StealTarget
        stealGroup: LAMP
  - type: entity
    parent: BaseLamp
    id: Lamp
    name: lamp
    description: A light emitting device.
    components:
      - type: Sprite
        sprite: Objects/Misc/Lights/lamp.rsi
        layers:
          - state: lamp
            map: [base]
          - state: lamp-on
            shader: unshaded
            visible: false
            map: [light]
      - type: Item
        sprite: Objects/Misc/Lights/lamp.rsi
      - type: GenericVisualizer
        visuals:
          enum.HolidayVisuals.Holiday:
            base:
              festive: {state: christmaslamp}
            light:
              festive: {state: christmaslamp-on}
      - type: HolidayVisuals
        holidays:
          festive: [FestiveSeason]
  - type: entity
    parent: BaseLamp
    id: LampGold
    name: desk lamp
    description: A light emitting device that would look great on a desk.
    components:
      - type: Sprite
        sprite: Objects/Misc/Lights/lampgreen.rsi
        layers:
          - state: lampgreen
            map: [base]
          - state: lampgreen-on
            shader: unshaded
            visible: false
            map: [light]
      - type: Item
        sprite: Objects/Misc/Lights/lampgreen.rsi
      - type: GenericVisualizer
        visuals:
          enum.HolidayVisuals.Holiday:
            base:
              festive:
                sprite: Objects/Misc/Lights/lamp.rsi
                state: christmaslamp
            light:
              festive:
                sprite: Objects/Misc/Lights/lamp.rsi
                state: christmaslamp-on
      - type: HolidayVisuals
        holidays:
          festive: [FestiveSeason]
  - type: entity
    parent: BaseLamp
    id: LampInterrogator
    name: interrogator lamp
    description: Ultra-bright lamp for the bad cop
    components:
      - type: Sprite
        sprite: Objects/Misc/Lights/lampint.rsi
        layers:
          - state: lamp-int
            map: [enum.FlashVisuals.BaseLayer]
          - state: lamp-int-on
            shader: unshaded
            visible: false
            map: [light]
          - state: flashing
            map: [enum.FlashVisuals.LightLayer]
            visible: false
      - type: StaticPrice
        price: 2500
      - type: Item
        sprite: Objects/Misc/Lights/lampint.rsi
      - type: PointLight
        netsync: false
        enabled: false
        radius: 2
        energy: 0.5
        color: '#FFFFEE'
      - type: GenericVisualizer
        visuals:
          enum.FlashVisuals.Burnt:
            enum.FlashVisuals.BaseLayer:
              true: {state: burnt}
          enum.FlashVisuals.Flashing:
            enum.FlashVisuals.LightLayer:
              true: {visible: true}
              false: {visible: false}
      - type: MeleeWeapon
        wideAnimationRotation: 180
        damage:
          types:
            Blunt: 0 # melee weapon to allow flashing individual targets
      - type: Flash
      - type: LimitedCharges
        maxCharges: 3
        charges: 3
      - type: AutoRecharge
        rechargeDuration: 30
      - type: ItemSlots
        slots:
          cell_slot:
            name: power-cell-slot-component-slot-name-default
            startingItem: PowerCellHigh
  - type: entity
    parent: BaseLamp
    id: Floodlight
    name: floodlight
    description: A pole with powerful mounted lights on it.
    components:
      - type: Sprite
        layers:
          - state: floodlight
          - state: floodlight_on
            shader: unshaded
            visible: false
            map: [light]
      - type: Item
        size: Normal
      - type: PointLight
        enabled: false
        radius: 8
        energy: 5
      - type: Fixtures
        fixtures:
          fix1:
            shape: !type:PhysShapeAabb
              bounds: -0.2, -0.5, 0.2, 0.5
            density: 50
            mask: [HighImpassable]
      - type: Destructible
        thresholds:
          - trigger: !type:DamageTrigger
              damage: 10
            behaviors:
              - !type:PlaySoundBehavior
                sound:
                  collection: GlassBreak
              - !type:SpawnEntitiesBehavior
                spawn:
                  FloodlightBroken:
                    min: 1
                    max: 1
              - !type:DoActsBehavior
                acts: [Destruction]
      - type: Physics
        canCollide: true
      - type: Damageable
        damageContainer: Inorganic
        damageModifierSet: Metallic
      - type: ItemSlots
        slots:
          cell_slot:
            name: power-cell-slot-component-slot-name-default
            startingItem: PowerCellMedium
      - type: Anchorable
  - type: entity
    parent: BaseItem
    id: FloodlightBroken
    name: broken floodlight
    description: A pole with powerful mounted lights on it. It's broken.
    components:
      - type: Sprite
        sprite: Objects/Misc/Lights/lights.rsi
        state: floodlight_broken
      - type: Fixtures
        fixtures:
          fix1:
            shape: !type:PhysShapeAabb
              bounds: -0.2, -0.5, 0.2, 0.5
            density: 50
            mask: [HighImpassable]
      - type: Destructible
        thresholds:
          - trigger: !type:DamageTrigger
              damage: 40
            behaviors:
              - !type:DoActsBehavior
                acts: [Destruction]
          - trigger: !type:DamageTrigger
              damage: 20
            behaviors:
              - !type:PlaySoundBehavior
                sound:
                  collection: MetalGlassBreak
              - !type:SpawnEntitiesBehavior
                spawn:
                  SheetSteel1:
                    min: 1
                    max: 1
              - !type:DoActsBehavior
                acts: [Destruction]
      - type: Physics
      - type: Damageable
        damageContainer: Inorganic
        damageModifierSet: Metallic
      - type: Anchorable
