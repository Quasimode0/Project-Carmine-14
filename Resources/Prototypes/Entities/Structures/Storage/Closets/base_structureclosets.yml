  - type: entity
    parent: BaseStructureDynamic
    id: ClosetBase
    name: closet
    description: A standard-issue Nanotrasen storage unit.
    abstract: true
    components:
      - type: Sprite
        noRot: true
        sprite: Structures/Storage/closet.rsi
        layers:
          - state: generic
            map: [enum.StorageVisualLayers.Base]
          - state: generic_door
            map: [enum.StorageVisualLayers.Door]
          - state: welded
            visible: false
            map: [enum.WeldableLayers.BaseWelded]
      - type: StaticPrice
        price: 50
      - type: Appearance
      - type: Fixtures
        fixtures:
          fix1:
            shape: !type:PhysShapeAabb
              bounds: -0.25,-0.48,0.25,0.48
            density: 150
            mask: [MachineMask]
            layer: [MachineLayer]
      - type: Destructible
        thresholds:
          - trigger: !type:DamageTrigger
              damage: 300
            behaviors:
              - !type:DoActsBehavior
                acts: [Destruction]
          - trigger: !type:DamageTrigger
              damage: 150
            behaviors:
              - !type:DoActsBehavior
                acts: [Destruction]
              - !type:PlaySoundBehavior
                sound:
                  collection: MetalBreak
                  params:
                    volume: -6
              - !type:SpawnEntitiesBehavior
                spawn:
                  SheetSteel1:
                    min: 1
                    max: 1
      - type: Physics
      - type: Damageable
        damageContainer: StructuralInorganic
        damageModifierSet: StructuralMetallic
      - type: Transform
        noRot: true
      - type: ContainerContainer
        containers:
          entity_storage: !type:Container
          paper_label: !type:ContainerSlot
      - type: DamageOtherOnHit
        damage:
          types:
            Blunt: 10
        staminaCost: 35

# steel closet base (that can be constructed/deconstructed)
      - type: ResistLocker
      - type: MovedByPressure
      - type: PaperLabel
        labelSlot:
          insertVerbText: Attach Label
          ejectVerbText: Remove Label
          whitelist:
            components: [Paper]
      - type: ItemSlots
      - type: DamageOnHighSpeedImpact
        damage:
          types:
            Blunt: 5
        soundHit:
          collection: MetalThud
      - type: InteractionOutline
      - type: EntityStorage
        closeSound:
          path: /Audio/Effects/closet_close.ogg
          params:
            volume: -4
        openSound:
          path: /Audio/Effects/closet_open.ogg
          params:
            volume: -4
      - type: Weldable
      - type: PlaceableSurface
        placeCentered: true
        isPlaceable: false
      - type: EntityStorageVisuals
        stateBaseClosed: generic
        stateDoorOpen: generic_open
        stateDoorClosed: generic_door
  - type: entity
    parent: ClosetBase
    id: ClosetSteelBase
    components:
      - type: Construction
        graph: ClosetSteel
        node: done
        containers: [entity_storage]
      - type: DamageOtherOnHit
        damage:
          types:
            Blunt: 15
        staminaCost: 50

# Wall Closet
  - type: entity
    id: BaseWallCloset
    name: wall closet
    description: A standard-issue Nanotrasen storage unit, now on walls.
    abstract: true
    placement:
      mode: SnapgridCenter
    components:
      - type: Sprite
        drawdepth: WallMountedItems
        noRot: false
        sprite: Structures/Storage/wall_locker.rsi
        layers:
          - state: generic
            map: [enum.StorageVisualLayers.Base]
          - state: generic_door
            map: [enum.StorageVisualLayers.Door]
          - state: welded
            visible: false
            map: [enum.WeldableLayers.BaseWelded]
      - type: StaticPrice
        price: 50
      - type: Clickable
      - type: Destructible
        thresholds:
          - trigger: !type:DamageTrigger
              damage: 300
            behaviors:
              - !type:DoActsBehavior
                acts: [Destruction]
          - trigger: !type:DamageTrigger
              damage: 150
            behaviors:
              - !type:DoActsBehavior
                acts: [Destruction]
              - !type:PlaySoundBehavior
                sound:
                  collection: MetalBreak
                  params:
                    volume: -6
              - !type:SpawnEntitiesBehavior
                spawn:
                  SheetSteel1:
                    min: 1
                    max: 1
      - type: Damageable
        damageContainer: Inorganic
        damageModifierSet: Metallic
      - type: Transform
        noRot: false
      - type: Construction
        graph: ClosetWall
        node: done
        containers:
          - entity_storage

# Wall locker
      - type: ContainerContainer
        containers:
          entity_storage: !type:Container
            ents: []
      - type: InteractionOutline
      - type: ResistLocker
      - type: Weldable
      - type: WallMount
        arc: 175
      - type: EntityStorage
        isCollidableWhenOpen: true
        enteringOffset: 0, -0.75
        closeSound:
          path: /Audio/Items/deconstruct.ogg
        openSound:
          path: /Audio/Items/deconstruct.ogg
  - type: entity
    parent: BaseWallCloset
    id: BaseWallLocker
    abstract: true
    components:
      - type: Sprite
        sprite: Structures/Storage/wall_locker.rsi
        layers:
          - state: generic
            map: [enum.StorageVisualLayers.Base]
          - state: generic_door
            map: [enum.StorageVisualLayers.Door]
          - state: locked
            map: [enum.LockVisualLayers.Lock]
            shader: unshaded
          - state: welded
            visible: false
            map: [enum.WeldableLayers.BaseWelded]

# Base suit storage unit
# I am terribly sorry for duplicating the closet almost-wholesale, but the game malds at me if I don't so here we are.
      - type: AccessReader
      - type: Lock
      - type: LockVisuals
  - type: entity
    parent: BaseStructure
    id: SuitStorageBase
    name: suit storage unit
    description: A fancy hi-tech storage unit made for storing space suits.
    components:
      - type: Sprite
        noRot: true
        sprite: Structures/Storage/suit_storage.rsi
        layers:
          - state: base
          - state: door
            map: [enum.StorageVisualLayers.Door]
          - state: welded
            visible: false
            map: [enum.WeldableLayers.BaseWelded]
          - state: locked
            map: [enum.LockVisualLayers.Lock]
            shader: unshaded
      - type: StaticPrice
        price: 80
      - type: Appearance
      - type: Fixtures
        fixtures:
          fix1:
            shape: !type:PhysShapeAabb
              bounds: -0.25,-0.48,0.25,0.48
            density: 350
            mask: [MachineMask]
            layer: [MachineLayer]
      - type: Destructible
        thresholds:
          - trigger: !type:DamageTrigger
              damage: 400
            behaviors:
              - !type:DoActsBehavior
                acts: [Destruction]
          - trigger: !type:DamageTrigger
              damage: 200
            behaviors:
              - !type:DoActsBehavior
                acts: [Destruction]
              - !type:PlaySoundBehavior
                sound:
                  collection: MetalBreak
                  params:
                    volume: -6
              - !type:SpawnEntitiesBehavior
                spawn:
                  SheetSteel1:
                    min: 1
                    max: 1
      - type: Physics
      - type: Damageable
        damageContainer: Inorganic
        damageModifierSet: Metallic
      - type: Transform
        noRot: true
      - type: ContainerContainer
        containers:
          entity_storage: !type:Container
      - type: AccessReader
      - type: Lock
      - type: Anchorable
        delay: 2
      - type: ResistLocker
      - type: MovedByPressure
      - type: DamageOnHighSpeedImpact
        damage:
          types:
            Blunt: 5
        soundHit:
          collection: MetalThud
      - type: InteractionOutline
      - type: EntityStorage
      - type: Weldable
      - type: PlaceableSurface
        placeCentered: true
        isPlaceable: false
      - type: EntityStorageVisuals
        stateBase: base
        stateDoorOpen: base
        stateDoorClosed: door
      - type: LockVisuals
