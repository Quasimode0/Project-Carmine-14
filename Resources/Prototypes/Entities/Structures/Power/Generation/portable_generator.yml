  - type: entity
    parent: [BaseMachine, SmallConstructibleMachine, StructureWheeled]
    id: PortableGeneratorBase
    abstract: true
    components:
      - type: Sprite
        sprite: Structures/Power/Generation/portable_generator.rsi
        noRot: true

    # Construction, interaction
      - type: StaticPrice
        price: 500
      - type: Appearance
      - type: Fixtures
        fixtures:
          fix1:
            shape: !type:PhysShapeAabb
              bounds: -0.40,-0.40,0.40,0.40
          # Despite the heavy weight, it has wheels, so it's still fairly portable.
            density: 155
            mask: [MachineMask]
            layer:
              - MachineLayer

    # Visuals
      - type: Destructible
        thresholds:
          - trigger: !type:DamageTrigger
              damage: 200
            behaviors:
              - !type:DoActsBehavior
                acts: [Destruction]
          - trigger: !type:DamageTrigger
              damage: 100
            behaviors:
              - !type:PlaySoundBehavior
                sound:
                  collection: MetalBreak
              - !type:ChangeConstructionNodeBehavior
                node: machineFrame
              - !type:DoActsBehavior
                acts: [Destruction]
      - type: Physics
        bodyType: Dynamic
      - type: Transform
        anchored: false
      - type: UserInterface
        interfaces:
          enum.GeneratorComponentUiKey.Key:
            type: PortableGeneratorBoundUserInterface
      - type: AmbientSound
        range: 5
        volume: -5
        sound:
          path: /Audio/Ambience/Objects/engine_hum.ogg
        enabled: false
      - type: WiresPanel
      - type: ActivatableUI
        key: enum.GeneratorComponentUiKey.Key
      - type: Electrified
        onHandInteract: false
        onInteractUsing: false
        onBump: false
        requirePower: true
        highVoltageNode: output
      - type: GuideHelp
        guides: [PortableGenerator, Power]
      - type: PortableGenerator
        startSoundEmpty: {collection: GeneratorTugEmpty}
        startSound: {collection: GeneratorTug}
      - type: FuelGenerator
      - type: PowerSupplier
        supplyRate: 3000
        supplyRampRate: 500
        supplyRampTolerance: 500
        enabled: false
      - type: DeviceLinkSink
        ports: [true, false, Toggle]
      - type: GeneratorSignalControl
      - type: DeviceNetwork
        deviceNetId: Wireless
        receiveFrequencyId: BasicDevice
      - type: WirelessNetworkConnection
        range: 200
  - type: entity
    parent: PortableGeneratorBase
    id: PortableGeneratorSwitchableBase
    abstract: true
    components:
      - type: PowerSwitchable
        examineText: power-switchable-generator-examine
        switchText: power-switchable-generator-switched
        cables:
          - voltage: HV
            node: output_hv
          - voltage: MV
            node: output_mv
      - type: UseDelay
        delay: 1
      - type: NodeContainer
        examinable: true
        nodes:
          output_hv: !type:CableDeviceNode
            nodeGroupID: HVPower
          output_mv: !type:CableDeviceNode
            nodeGroupID: MVPower
            enabled: false
