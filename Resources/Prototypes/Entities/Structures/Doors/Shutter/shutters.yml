  - type: entity
    parent: BaseStructure
    id: BaseShutter
    name: shutter
    description: One shudders to think about what might be behind this shutter.
    abstract: true
    placement:
      mode: SnapgridCenter
    components:
      - type: Sprite
        sprite: Structures/Doors/Shutters/shutters.rsi
        drawdepth: BlastDoors
        layers:
          - state: closed
            map: [enum.DoorVisualLayers.Base]
      - type: Appearance
      - type: Fixtures
        fixtures:
          fix1:
            shape: !type:PhysShapeAabb
              bounds: -0.49,-0.49,0.49,0.49 # don't want this colliding with walls or they won't close
            density: 100
            mask: [FullTileMask]
            layer: [AirlockLayer]
      - type: Destructible
        thresholds:
          - trigger: !type:DamageTrigger
              damage: 500
            behaviors:
              - !type:DoActsBehavior
                acts: [Destruction]
      - type: Physics
      - type: Damageable
        damageContainer: StructuralInorganic
        damageModifierSet: StrongMetallic
      - type: UserInterface
        interfaces:
          enum.WiresUiKey.Key:
            type: WiresBoundUserInterface
      - type: StationAiWhitelist
      - type: AnimationPlayer
      - type: NavMapDoor
      - type: Door
        openDrawDepth: BlastDoors
        closedDrawDepth: BlastDoors
        bumpOpen: false
        clickOpen: false
        closeTimeOne: 0.2
        closeTimeTwo: 1.2
        openTimeOne: 1.2
        openTimeTwo: 0.2
        openingAnimationTime: 1.4
        closingAnimationTime: 1.4
        crushDamage:
          types:
            Blunt: 5 # getting shutters closed on you probably doesn't hurt that much
        openSound:
          path: /Audio/Machines/blastdoor.ogg
        closeSound:
          path: /Audio/Machines/blastdoor.ogg
      - type: Weldable
        time: 3
      - type: Airtight
      - type: RadiationBlocker
        resistance: 1
      - type: DoorSignalControl
      - type: DeviceNetwork
        deviceNetId: Wireless
        receiveFrequencyId: BasicDevice
      - type: WirelessNetworkConnection
        range: 200
      - type: DeviceLinkSink
        ports: [Open, Close, Toggle]
      - type: DeviceLinkSource
        ports: [DoorStatus]
        lastSignals:
          DoorStatus: false
      - type: BlockWeather
      - type: InteractionVerbs
        allowedVerbs: [KnockOn]
      - type: IconSmooth
        key: walls
        mode: NoSprite
  - type: entity
    parent: BaseShutter
    id: ShuttersNormal
    components:
      - type: Construction
        graph: Shutters
        node: Shutters
        containers: [board]
      - type: Occluder
  - type: entity
    parent: ShuttersNormal
    id: ShuttersNormalOpen
    suffix: Open
    components:
      - type: Physics
        canCollide: false
      - type: Door
        state: Open
      - type: Occluder
        enabled: false
      - type: Airtight
        airBlocked: false
      - type: RadiationBlocker
        enabled: false
  - type: entity
    parent: BaseShutter
    id: ShuttersRadiation
    name: radiation shutters
    description: A relatively fragile set of shutters, made of radiation blocking lead plates.
    components:
      - type: Sprite
        sprite: Structures/Doors/Shutters/shutters_radiation.rsi
        layers:
          - state: closed
            map: [enum.DoorVisualLayers.Base]
      - type: Destructible
        thresholds:
          - trigger: !type:DamageTrigger
              damage: 100
            behaviors:
              - !type:DoActsBehavior
                acts: [Destruction]
      - type: Construction
        graph: Shutters
        node: ShuttersRadiation
        containers: [board]
      - type: Occluder
      - type: RadiationBlocker
        resistance: 10
  - type: entity
    parent: ShuttersRadiation
    id: ShuttersRadiationOpen
    suffix: Open
    components:
      - type: Physics
        canCollide: false
      - type: Door
        state: Open
      - type: Occluder
        enabled: false
      - type: Airtight
        airBlocked: false
      - type: RadiationBlocker
        enabled: false
  - type: entity
    parent: BaseShutter
    id: ShuttersWindow
    name: window shutters
    description: The Best (TM) place to see your friends explode!
    components:
      - type: Sprite
        sprite: Structures/Doors/Shutters/shutters_window.rsi
        layers:
          - state: closed
            map: [enum.DoorVisualLayers.Base]
      - type: Construction
        graph: Shutters
        node: ShuttersWindow
        containers: [board]
      - type: RadiationBlocker
        resistance: 1
  - type: entity
    parent: ShuttersWindow
    id: ShuttersWindowOpen
    suffix: Open
    components:
      - type: Physics
        canCollide: false
      - type: Door
        state: Open
      - type: Airtight
        airBlocked: false
      - type: RadiationBlocker
        enabled: false

# Frame for construction
  - type: entity
    parent: BaseStructureDynamic
    id: ShuttersFrame
    name: shutter frame
    description: A frame for constructing a shutter.
    components:
      - type: Sprite
        sprite: Structures/Doors/Shutters/shutters.rsi
        state: frame
      - type: Fixtures
        fixtures:
          fix1:
            shape: !type:PhysShapeAabb
              bounds: -0.45,-0.45,0.45,0.45
            density: 55
            mask: [Impassable, HighImpassable]
            layer: [HighImpassable]
      - type: Destructible
        thresholds:
          - trigger: !type:DamageTrigger
              damage: 500
            behaviors:
              - !type:DoActsBehavior
                acts: [Destruction]
      - type: Physics
        bodyType: Dynamic
      - type: Damageable
        damageContainer: Inorganic
        damageModifierSet: Metallic
      - type: Transform
        noRot: true
      - type: Construction
        graph: Shutters
        node: frame1
        containers: [board]
      - type: InteractionOutline
