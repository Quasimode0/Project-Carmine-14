  - type: entity
    id: WeaponEnergyTurretControlPanelFrame
    name: sentry turret control panel assembly
    description: An incomplete wall-mounted assembly for a sentry turret control panel.
    categories: [HideSpawnMenu]
    components:
      - type: Sprite
        noRot: false
        drawdepth: SmallObjects
        sprite: Structures/Wallmounts/turret_controls.rsi
        layers:
          - state: base

  # Destruction
      - type: Clickable
      - type: Destructible
        thresholds:
          - trigger: !type:DamageTrigger
              damage: 200
            behaviors:
              - !type:PlaySoundBehavior
                sound:
                  collection: MetalGlassBreak
                  params:
                    volume: -4
              - !type:ChangeConstructionNodeBehavior
                node: machineFrame
              - !type:DoActsBehavior
                acts: [Destruction]

  # General properties
      - type: Damageable
        damageContainer: StructuralInorganic
        damageModifierSet: StructuralMetallic
      - type: Transform
        anchored: true
      - type: Construction
        graph: WeaponEnergyTurretControlPanel
        node: frame
      - type: WallMount
      - type: InteractionOutline
    placement:
      mode: SnapgridCenter
      snap: [Wallmount]
  - type: entity
    parent: WeaponEnergyTurretControlPanelFrame
    id: WeaponEnergyTurretStationControlPanel
    name: sentry turret control panel
    description: A wall-mounted interface for remotely configuring the operational parameters of linked sentry turrets.
    components:
      - type: Sprite
        noRot: false
        drawdepth: SmallObjects
        sprite: Structures/Wallmounts/turret_controls.rsi
        layers:
          - state: base
          - state: safe
            map: [enum.PowerDeviceVisualLayers.Powered]
            shader: unshaded
          - state: wires
            map: [enum.WiresVisualLayers.MaintenancePanel]
            visible: false
      - type: Appearance
      - type: GenericVisualizer
        visuals:
          enum.WiresVisualLayers.MaintenancePanel:
            enum.WiresVisualLayers.MaintenancePanel:
              true: {visible: true}
              false: {visible: false}
          enum.PowerDeviceVisuals.Powered:
            enum.PowerDeviceVisualLayers.Powered:
              true: {visible: true}
              false: {visible: false}
          enum.TurretControllerVisuals.ControlPanel:
            enum.PowerDeviceVisualLayers.Powered:
              -1: {state: safe}
              0: {state: stun}
              1: {state: lethal}
      - type: UserInterface
        interfaces:
          enum.DeployableTurretControllerUiKey.Key:
            type: TurretControllerBoundUserInterface
          enum.WiresUiKey.Key:
            type: WiresBoundUserInterface

  # Wires
      - type: Construction
        graph: WeaponEnergyTurretControlPanel
        node: finish
      - type: StationAiWhitelist
      - type: AccessReader
        access:
          - [Security]

  # Turret related
      - type: TurretTargetSettings
        exemptAccessLevels:
          - Captain
          - HeadOfSecurity
          - Security
          - Borg
          - BasicSilicon
      - type: DeployableTurretController
        accessGroups:
          - Cargo
          - Command
          - Engineering
          - General
          - Medical
          - Research
          - Security
          - Service
          - Silicon
        accessLevels:
          - Armory
          - Atmospherics
          - Bar
          - BasicSilicon
          - Borg
          - Brig
          - Detective
          - Captain
          - Cargo
          - Chapel
          - Chemistry
          - ChiefEngineer
          - ChiefMedicalOfficer
          - Command
          - Cryogenics
          - Engineering
          - External
          - HeadOfPersonnel
          - HeadOfSecurity
          - Hydroponics
          - Janitor
          - Kitchen
          - Lawyer
          - Maintenance
          - Medical
          - Quartermaster
          - Research
          - ResearchDirector
          - Salvage
          - Security
          - Service
          - Theatre

  # Device network
      - type: DeviceList
        isAllowList: true
      - type: DeviceNetwork
        deviceNetId: Wired
        receiveFrequencyId: Turret
        transmitFrequencyId: TurretControl
        sendBroadcastAttemptEvent: true
        prefix: device-address-prefix-console
      - type: DeviceNetworkRequiresPower
      - type: WiredNetworkConnection

  # UI
      - type: ActivatableUI
        key: enum.DeployableTurretControllerUiKey.Key
      - type: ActivatableUIRequiresPower
      - type: WiresPanel
      - type: WiresVisuals
      - type: Wires
        boardName: wires-board-name-turret-controls
        layoutId: TurretControls
      - type: Lock
        locked: true
        unlockOnClick: false
      - type: LockedWiresPanel

  # General properties
      - type: ApcPowerReceiver
      - type: ExtensionCableReceiver
      - type: Electrified
        enabled: false
        usesApcPower: true
  # - type: ContainerFill
  #   containers:
  #     board: [ WeaponEnergyTurretStationControlPanelElectronics ]
  # - type: ContainerContainer
  #   containers:
  #     board: !type:Container
