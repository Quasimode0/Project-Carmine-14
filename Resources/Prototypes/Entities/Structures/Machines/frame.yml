  - type: entity
    id: UnfinishedMachineFrame
    name: machine frame
    description: A machine under construction. Needs more parts.
    suffix: Unfinished
    placement:
      mode: SnapgridCenter
    components:
      - type: Sprite
        sprite: Structures/Machines/parts.rsi
        state: box_0
        snapCardinals: true
      - type: Clickable
      - type: Fixtures
        fixtures:
          fix1:
            shape: !type:PhysShapeAabb
              bounds: -0.25,-0.5,0.25,0.5
            density: 190
            mask: [MachineMask]
            layer: [MachineLayer]
      - type: Destructible
        thresholds:
          - trigger: !type:DamageTrigger
              damage: 100
            behaviors:
              - !type:PlaySoundBehavior
                sound:
                  collection: MetalBreak
              - !type:ChangeConstructionNodeBehavior
                node: start
              - !type:DoActsBehavior
                acts: [Destruction]
      - type: Physics
        bodyType: Static
      - type: Damageable
        damageContainer: Inorganic
        damageModifierSet: Metallic
      - type: Transform
        anchored: true
      - type: Construction
        containers: [machine_board, machine_parts]
        graph: Machine
        node: missingWires
      - type: ContainerContainer
        containers:
          machine_parts: !type:Container
      - type: InteractionOutline
      - type: Anchorable
      - type: Rotatable
      - type: Pullable
  - type: entity
    id: MachineFrame
    name: machine frame
    suffix: Ready
    placement:
      mode: SnapgridCenter
    components:
      - type: Sprite
        sprite: Structures/Machines/parts.rsi
        state: box_1
        snapCardinals: true
      - type: Appearance
      - type: Clickable
      - type: Fixtures
        fixtures:
          fix1:
            shape: !type:PhysShapeAabb
              bounds: -0.25,-0.5,0.25,0.5
            density: 190
            mask: [MachineMask]
            layer: [MachineLayer]
      - type: Destructible
        thresholds:
          - trigger: !type:DamageTrigger
              damage: 100
            behaviors:
              - !type:PlaySoundBehavior
                sound:
                  collection: MetalBreak
              - !type:ChangeConstructionNodeBehavior
                node: missingWires
              - !type:DoActsBehavior
                acts: [Destruction]
      - type: Physics
        bodyType: Static
      - type: Damageable
        damageContainer: Inorganic
        damageModifierSet: Metallic
      - type: Transform
        anchored: true
      - type: Construction
        graph: Machine
        node: machineFrame
        defaultTarget: machine
        containers: [machine_board, machine_parts]
      - type: ContainerContainer
        containers:
          machine_parts: !type:Container
      - type: InteractionOutline
      - type: Anchorable
      - type: Rotatable
      - type: Pullable
      - type: MachineFrame
      - type: ItemMapper
        mapLayers:
          box_2:
            minCount: 1
            whitelist:
              components: [MachineBoard]
  - type: entity
    parent: BaseStructureDynamic
    id: MachineFrameDestroyed
    name: destroyed machine frame
    placement:
      mode: SnapgridCenter
    components:
      - type: Sprite
        sprite: Structures/Machines/parts.rsi
        state: destroyed
      - type: Destructible
        thresholds:
          - trigger: !type:DamageTrigger
              damage: 100
            behaviors:
              - !type:SpawnEntitiesBehavior
                spawn:
                  SheetSteel1:
                    min: 1
                    max: 3
              - !type:DoActsBehavior
                acts: [Destruction]
      - type: Physics
        bodyType: Static
      - type: Damageable
        damageContainer: Inorganic
        damageModifierSet: Metallic
      - type: Transform
        anchored: true
        noRot: true
      - type: Construction
        graph: Machine
        node: destroyedMachineFrame
