  - type: entity
    id: BaseLightFixture
    abstract: true
    placement:
      mode: SnapgridCenter
      snap: [Wallmount]
    components:
      - type: Clickable
      - type: Destructible
        thresholds:
          - trigger: !type:DamageTrigger
              damage: 200
            behaviors: # excess damage, don't spawn entities.
              - !type:DoActsBehavior acts: [Destruction]
              - !type:PlaySoundBehavior
                sound:
                  collection: GlassBreak
          - trigger: !type:DamageTrigger
              damage: 50
            behaviors:
              - !type:EmptyAllContainersBehaviour
              - !type:SpawnEntitiesBehavior
                spawn:
                  SheetSteel1:
                    min: 2
                    max: 2
              - !type:DoActsBehavior
                acts: [Destruction]
              - !type:PlaySoundBehavior
                sound:
                  collection: GlassBreak
      - type: Damageable
        damageContainer: Inorganic
        damageModifierSet: Metallic
      - type: Transform
        anchored: true
      - type: AmbientSound
        volume: -15
        range: 2
        sound:
          path: /Audio/Ambience/Objects/light_hum.ogg
      - type: WallMount
      - type: MeleeSound
        soundGroups:
          Brute:
            collection: GlassSmash
      - type: InteractionOutline
      - type: RCDDeconstructable
        cost: 4
        delay: 2
        fx: EffectRCDDeconstruct2
  - type: entity
    parent: BaseLightFixture
    id: BasePoweredLightFixture
    suffix: Empty
    abstract: true
    components:
      - type: Appearance
      - type: ContainerContainer
        containers:
          light_bulb: !type:ContainerSlot
      - type: ApcPowerReceiver
      - type: ExtensionCableReceiver
      - type: DeviceNetwork
        deviceNetId: Wireless
        receiveFrequencyId: SmartLight
      - type: WirelessNetworkConnection
        range: 200
      - type: DeviceLinkSink
        ports: [true, false, Toggle]
      - type: PoweredLightVisuals
        blinkingSound:
          path: /Audio/Machines/light_tube_on.ogg
        spriteStateMap:
          empty: empty
          off: base
          on: base
          broken: broken
          burned: burned
  - type: entity
    parent: BaseLightFixture
    id: SmallLightFixturePowered
    name: small light
    description: An always powered light.
    suffix: Always Powered, Carmine
    components:
      - type: Sprite
        sprite: Structures/Wallmounts/lightbulbcaged.rsi
        state: base
        offset: 0, -0.75
        drawdepth: WallMountedItems
        layers:
          - map: [enum.PoweredLightLayers.Base]
            state: base
          - map: [enum.PoweredLightLayers.Glow]
            state: glow
            shader: unshaded
      - type: PointLight
        color: '#FFB475' # 3100K color temp
        energy: 0.5
        radius: 5
        softness: 1.1
        offset: 0, -1
        enabled: true
  - type: entity
    parent: [BasePoweredLightFixture, SmallLightFixturePowered]
    id: SmallLightFixtureEmpty
    name: small light
    description: A light fixture. Draws power and produces light when equipped with a light bulb.
    suffix: Empty, Carmine
    components:
      - type: Construction
        graph: LightFixture
        node: bulbLight
      - type: PoweredLight # it breaks if you dont specify damage
        bulb: Bulb
        damage:
          types:
            Heat: 2
  - type: entity
    parent: SmallLightFixtureEmpty
    id: SmallLightFixture
    suffix: Carmine
    components:
      - type: PoweredLight
        hasLampOnSpawn: LightBulb
        bulb: Bulb
        damage:
          types:
            Heat: 2
  - type: entity
    parent: BaseLightFixture
    id: LightTubeFixturePowered
    name: light tube
    description: An always powered light tube.
    suffix: Always Powered, Carmine
    components:
      - type: Sprite
        sprite: Structures/Wallmounts/Lighting/light_tube.rsi
        state: base
        offset: 0, -0.75
        drawdepth: WallMountedItems
        layers:
          - map: [enum.PoweredLightLayers.Base]
            state: base
          - map: [enum.PoweredLightLayers.Glow]
            state: glow
            shader: unshaded
      - type: PointLight
        color: '#FFC99D' # 3800K color temp
        energy: 0.5
        radius: 7
        softness: 1.1
        offset: 0, -1
        enabled: true
  - type: entity
    parent: [BasePoweredLightFixture, LightTubeFixturePowered]
    id: LightTubeFixtureEmpty
    name: light tube
    description: A light fixture. Draws power and produces light when equipped with a light bulb.
    suffix: Empty, Carmine
    components:
      - type: Construction
        graph: LightFixture
        node: tubeLight
      - type: PoweredLight # it breaks if you dont specify damage
        bulb: Tube
        damage:
          types:
            Heat: 2
  - type: entity
    parent: LightTubeFixtureEmpty
    id: LightTubeFixture
    suffix: Carmine
    components:
      - type: PoweredLight
        hasLampOnSpawn: LightTube
        bulb: Tube
        damage:
          types:
            Heat: 2
