  - type: entity
    id: BaseFoam
    abstract: true
    components:
      - type: Sprite
        drawdepth: Effects
      - type: Appearance
      - type: Clickable
      - type: Fixtures
        fixtures:
          fix1:
            hard: false
            shape: !type:PhysShapeAabb
              bounds: -0.4,-0.4,0.4,0.4
            mask: [ItemMask]
            layer: [SlipLayer]
      - type: Physics
      - type: Transform
        anchored: true

## FOAM
      - type: ActiveEdgeSpreader
      - type: AnimationPlayer
      - type: EdgeSpreader
        id: Smoke
      - type: Smoke
      - type: SmokeVisuals
      - type: SolutionContainerManager
        solutions:
          solutionArea:
            maxVol: 600
            canReact: false
  - type: entity
    parent: BaseFoam
    id: Foam
    name: foam
    categories: [HideSpawnMenu]
    components:
      - type: Sprite
        color: '#ffffffcc'
        sprite: Effects/foam.rsi
        layers:
          - state: foam
            map: [enum.FoamVisualLayers.Base]
          - map: [enum.EdgeLayer.South]
            state: foam-south
          - map: [enum.EdgeLayer.East]
            state: foam-east
          - map: [enum.EdgeLayer.North]
            state: foam-north
          - map: [enum.EdgeLayer.West]
            state: foam-west
      - type: FoamVisuals
        animationTime: 0.6
        animationState: foam-dissolve
      - type: IconSmooth
        key: walls
        mode: NoSprite
      - type: Slippery
      - type: SmoothEdge
      - type: StepTrigger
        triggerGroups:
          types:
            - SlipTile

## METAL FOAM
  - type: entity
    parent: Foam
    id: MetalFoam
    name: metal foam
    categories: [HideSpawnMenu]
    components:
      - type: Sprite
        color: '#ffffffcc'
        sprite: Effects/foam.rsi
        layers:
          - state: m_foam
            map: [enum.FoamVisualLayers.Base]
          - map: [enum.EdgeLayer.South]
            state: m_foam-south
          - map: [enum.EdgeLayer.East]
            state: m_foam-east
          - map: [enum.EdgeLayer.North]
            state: m_foam-north
          - map: [enum.EdgeLayer.West]
            state: m_foam-west
      - type: FoamVisuals
        animationTime: 0.6
        animationState: m_foam-dissolve
  - type: entity
    parent: MetalFoam
    id: IronMetalFoam
    name: iron metal foam
    categories: [HideSpawnMenu]
    components:
      - type: SpawnOnDespawn
        prototype: FoamedIronMetal
  - type: entity
    parent: MetalFoam
    id: AluminiumMetalFoam
    name: aluminium metal foam
    categories: [HideSpawnMenu]
    components:
      - type: SpawnOnDespawn
        prototype: FoamedAluminiumMetal
